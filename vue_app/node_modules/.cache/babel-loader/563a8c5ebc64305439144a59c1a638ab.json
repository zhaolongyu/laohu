{"remainingRequest":"c:\\xampp\\laohu\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!c:\\xampp\\laohu\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\xampp\\laohu\\vue_app_00\\src\\components\\sub\\comment.vue?vue&type=script&lang=js","dependencies":[{"path":"c:\\xampp\\laohu\\vue_app_00\\src\\components\\sub\\comment.vue","mtime":1549000600000},{"path":"c:\\xampp\\laohu\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\xampp\\laohu\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"c:\\xampp\\laohu\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//1:在当前 comment.vue 单独引入提示框组件\nimport { Toast } from \"mint-ui\";\nexport default {\n  data: function data() {\n    return {\n      pno: 0,\n      //页码 第几页\n      pageSize: 5,\n      list: [],\n      msg: \"\" //双向绑定评论内容\n\n    };\n  },\n  created: function created() {\n    this.getMore(); //this.addcomment();\n  },\n  methods: {\n    //添加评论\n    addcomment: function addcomment() {\n      var _this = this;\n\n      //练习1:\n      //*1-为添加评论绑定点击事件\n      //console.log(123);  \n      //*2-获取评论内容   11:49\n      var m = this.msg; //trim()去除字符串两端空格 \"\"\n      //*3-判断评论内容不能为空 \"\"  \"   \"\n      //*4-说论为空提示错误信息\n\n      var size = m.trim().length;\n\n      if (size == 0) {\n        Toast(\"评论内容不能为空\");\n        return;\n      } //*5-获取当前新闻nid\n\n\n      var nid = this.$route.query.nid; //*6-发送ajax\n      //1:创建参数对象  postData  测试\n      //stringify 将 js对象转换查询字符串\n\n      var postData = this.qs.stringify({\n        nid: nid,\n        content: this.msg\n      }); //2:发送post 请求         测试\n\n      var url = \"http://127.0.0.1:3000/\";\n      url += \"addcomment\";\n      this.axios.post(url, postData).then(function (result) {\n        //console.log(result.data);\n        //1:提示框 发表成功\n        Toast(result.data.msg); //2:清空评论区域内容 comment.vue \n\n        _this.msg = \"\"; //2.2:清空页码\n\n        _this.pno = 0; //2.3:清空原有数组\n\n        _this.list = []; //3:立即查看评论结果\n\n        _this.getMore();\n      });\n    },\n    //评论分页显示\n    getMore: function getMore() {\n      var _this2 = this;\n\n      this.pno++;\n      var url = \"http://127.0.0.1:3000/\";\n      url += \"getComment?nid=\" + this.$route.query.nid;\n      url += \"&pno=\" + this.pno;\n      url += \"&pageSize=\" + this.pageSize;\n      this.axios.get(url).then(function (result) {\n        var rows = _this2.list.concat(result.data.data);\n\n        _this2.list = rows;\n      });\n    }\n  }\n};",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAyBA;AACA,SAAA,KAAA,QAAA,SAAA;AACA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,WAAA,CADA;AACA;AACA,gBAAA,CAFA;AAGA,YAAA,EAHA;AAIA,WAAA,EAJA,CAIA;;AAJA,KAAA;AAMA,GARA;AASA,SATA,qBASA;AACA,SAAA,OAAA,GADA,CAEA;AACA,GAZA;AAaA,WAAA;AACA;AACA,cAFA,wBAEA;AAAA;;AACA;AACA;AACA;AACA;AACA,UAAA,IAAA,KAAA,GAAA,CALA,CAMA;AACA;AACA;;AACA,UAAA,OAAA,EAAA,IAAA,GAAA,MAAA;;AACA,UAAA,QAAA,CAAA,EAAA;AACA,cAAA,UAAA;AACA;AACA,OAbA,CAcA;;;AACA,UAAA,MAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA,CAfA,CAgBA;AACA;AACA;;AACA,UAAA,WAAA,KAAA,EAAA,CAAA,SAAA,CAAA;AACA,aAAA,GADA;AAEA,iBAAA,KAAA;AAFA,OAAA,CAAA,CAnBA,CAuBA;;AACA,UAAA,MAAA,wBAAA;AACA,aAAA,YAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,GAAA,EAAA,QAAA,EAAA,IAAA,CAAA,kBAAA;AACA;AACA;AACA,cAAA,OAAA,IAAA,CAAA,GAAA,EAHA,CAIA;;AACA,cAAA,GAAA,GAAA,EAAA,CALA,CAMA;;AACA,cAAA,GAAA,GAAA,CAAA,CAPA,CAQA;;AACA,cAAA,IAAA,GAAA,EAAA,CATA,CAUA;;AACA,cAAA,OAAA;AACA,OAZA;AAaA,KAzCA;AA0CA;AACA,WA3CA,qBA2CA;AAAA;;AACA,WAAA,GAAA;AACA,UAAA,MAAA,wBAAA;AACA,aAAA,oBAAA,KAAA,MAAA,CAAA,KAAA,CAAA,GAAA;AACA,aAAA,UAAA,KAAA,GAAA;AACA,aAAA,eAAA,KAAA,QAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,kBAAA;AACA,YAAA,OAAA,OAAA,IAAA,CAAA,MAAA,CAAA,OAAA,IAAA,CAAA,IAAA,CAAA;;AACA,eAAA,IAAA,GAAA,IAAA;AACA,OAHA;AAIA;AArDA;AAbA,CAAA","sourcesContent":["<!-- src/compoents/sub/comment.vue-->\r\n<!-- 子组件不用配置访问路径-->\r\n<template>\r\n  <div class=\"app-comment\">\r\n    \t\t<div class=\"mui-card\">\r\n\t\t\t\t<div class=\"mui-card-header\">\r\n        </div>\r\n\t\t\t\t<div class=\"mui-card-content\">\r\n\t\t\t\t\t<div class=\"mui-card-content-inner\">\r\n\t\t\t\t\t\t<textarea placeholder=\"请吐槽最多120个字\" maxlength=\"120\" v-model=\"msg\"></textarea>\r\n            <mt-button size=\"large\" type=\"primary\" @click=\"addcomment\">发表评论</mt-button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div class=\"mui-card-footer\">\r\n            <div class=\"cmt-list\">\r\n              <div class=\"cmt-item\" v-for=\"(item,i) in list\" :key=\"item.id\">\r\n         <div>第{{i+1}}楼  发表时间:{{item.ctime | dateFilter}}</div>\r\n         <div>{{item.content}}</div>\r\n              </div>\r\n            </div>\r\n        </div>\r\n\t\t\t</div>\r\n  </div>\r\n</template>\r\n<script>\r\n  //1:在当前 comment.vue 单独引入提示框组件\r\n  import {Toast} from \"mint-ui\"\r\n  export default {\r\n    data(){\r\n      return {\r\n        pno:0,   //页码 第几页\r\n        pageSize:5,\r\n        list:[],\r\n        msg:\"\"  //双向绑定评论内容\r\n      }\r\n    },\r\n    created(){\r\n      this.getMore();\r\n      //this.addcomment();\r\n    },\r\n    methods:{\r\n      //添加评论\r\n      addcomment(){\r\n        //练习1:\r\n        //*1-为添加评论绑定点击事件\r\n        //console.log(123);  \r\n        //*2-获取评论内容   11:49\r\n        var m = this.msg;\r\n        //trim()去除字符串两端空格 \"\"\r\n        //*3-判断评论内容不能为空 \"\"  \"   \"\r\n        //*4-说论为空提示错误信息\r\n        var size = m.trim().length;\r\n        if(size == 0){\r\n          Toast(\"评论内容不能为空\");\r\n          return;\r\n        }\r\n        //*5-获取当前新闻nid\r\n        var nid = this.$route.query.nid;\r\n        //*6-发送ajax\r\n        //1:创建参数对象  postData  测试\r\n        //stringify 将 js对象转换查询字符串\r\n        var postData = this.qs.stringify({\r\n          nid:nid,\r\n          content:this.msg\r\n        });\r\n        //2:发送post 请求         测试\r\n        var url = \"http://127.0.0.1:3000/\";\r\n            url+=\"addcomment\";\r\n    this.axios.post(url,postData).then(result=>{\r\n          //console.log(result.data);\r\n          //1:提示框 发表成功\r\n          Toast(result.data.msg);\r\n          //2:清空评论区域内容 comment.vue \r\n          this.msg = \"\";\r\n          //2.2:清空页码\r\n          this.pno = 0;\r\n          //2.3:清空原有数组\r\n          this.list = [];\r\n          //3:立即查看评论结果\r\n          this.getMore();\r\n        });\r\n      },\r\n      //评论分页显示\r\n      getMore(){\r\n         this.pno++;\r\n         var url = \"http://127.0.0.1:3000/\";\r\n         url+=\"getComment?nid=\"+this.$route.query.nid;\r\n         url+=\"&pno=\"+this.pno;\r\n         url+=\"&pageSize=\"+this.pageSize;\r\n         this.axios.get(url).then(result=>{\r\n             var rows = this.list.concat(result.data.data);\r\n             this.list = rows;\r\n         });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n</style>\r\n"],"sourceRoot":"src\\components\\sub"}]}